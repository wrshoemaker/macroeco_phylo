#!/bin/bash


# 0.01,  0.010500551788704102

declare -a distances=("0.011026158786725693" "0.011578075137048793" "0.01215761775900882" "0.012766169490574075" "0.013405182387914735" "0.01407618119013228" "0.014780766957416655" "0.015520620891311995" "0.016297508346206444" "0.01711328304161781" "0.017969891485325948" "0.0188693776179058" "0.01981388768974338" "0.020805675382171703" "0.021847107184946" "0.0229406680428895" "0.024088967285183036" "0.02529474485144633" "0.026560877829466867" "0.027890387320175944" "0.029286445646252372" "0.030752383921554067" "0.032291699999439" "0.03390806681894053" "0.03560534116871242" "0.0373875728896543" "0.03925901453817645" "0.04122413153316091" "0.04328761281083057" "0.04545438201294978" "0.047729609235051915" "0.05011872336272725" "0.05262742502540514" "0.0552617001985409" "0.05802783448666185" "0.06093242812135427" "0.06398241170997708" "0.06718506277268017" "0.07054802310718646" "0.07407931702277047" "0.0777873704869431" "0.08168103123052588" "0.08576958985908942")

#"0.09006280202112786" "0.09457091168586576" "0.09930467558623954" "0.10427538888537682" "0.10949491212781594" "0.11497569953977363" "0.12073082874598748" "0.12677403197404075" "0.13311972882062445" "0.13978306065792132" "0.14677992676220697" "0.15412702225087496" "0.1618418779184062" "0.16994290206633514" "0.17844942442702214" "0.1873817422860384" "0.19676116891321516" "0.20661008441791714" "0.21695198914988656" "0.22781155977307543" "0.23921470814626386" "0.25118864315095807" #"0.26376193561409494" "0.27696458648046407" "0.2908280983975128" "0.30538555088334157" "0.320671679257246" "0.33672295752114223" "0.3535776853896366" "0.3712760796764005" "0.3898603702549074" "0.4093749008225011" "0.4298662347082279" "0.45138326597689776")

#declare -a distances=("0.010500551788704102")

counter=0

for distance in "${distances[@]}"
do

  bash_out="/N/u/wrshoema/Carbonate/macroeco_phylo/scripts/bash/qsub_make_phylo_dict_carbonate_${counter}.sh"
  if [ -f $bash_out ]; then
      rm $bash_out
  fi

  echo '#!/bin/bash' >> $bash_out
  echo '#SBATCH --mail-user=williamrshoemaker@gmail.com' >> $bash_out
  echo '#SBATCH --nodes=1' >> $bash_out
  echo '#SBATCH --ntasks-per-node=1' >> $bash_out
  echo '#SBATCH --cpus-per-task=8' >> $bash_out
  echo '#SBATCH --time=48:00:00' >> $bash_out
  echo '#SBATCH --mail-type=FAIL,BEGIN,END' >> $bash_out
  echo "#SBATCH --job-name=distance-${distance}" >> $bash_out
  echo '#SBATCH --mem=10G' >> $bash_out

  echo 'module unload python' >> $bash_out
  echo 'module load anaconda' >> $bash_out
  echo 'conda activate macroeco_phylo' >> $bash_out

  echo "python /N/u/wrshoema/Carbonate/macroeco_phylo/scripts/make_phylo_dict_carbonate.py ${distance}" >> $bash_out

  sbatch ${bash_out}

  let counter++

done
